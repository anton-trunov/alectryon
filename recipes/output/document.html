<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.16: http://docutils.sourceforge.net/" />
<title>Forget about strengthening induction hypotheses: write fixpoints!</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.min.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document" id="forget-about-strengthening-induction-hypotheses-write-fixpoints">
<h1 class="title">Forget about strengthening induction hypotheses: write fixpoints!</h1>

<p>Here's an <em>inductive specification</em> of evenness:</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Inductive</span> <span class="nf">Even</span> : nat -&gt; <span class="kt">Prop</span> :=
| EvenO : Even O
| EvenS : <span class="kr">forall</span> <span class="nv">n</span>, Even n -&gt; Even (S (S n)).</span></span></span></pre><p>‚Ä¶ and a corresponding decision procedure:</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">even</span> (<span class="nv">n</span>: nat): bool :=
  <span class="kr">match</span> n <span class="kr">with</span>
  | <span class="mi">0</span> =&gt; true
  | <span class="mi">1</span> =&gt; false
  | S (S n) =&gt; even n
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
<span class="c">(* Ensure that we never unfold [even (S n)] *)</span>
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Arguments</span> even : <span class="nb">simpl</span> nomatch.</span></span></span></pre><p>Can we prove it correct?</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="document-v-rst-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">even_Even</span> :
  <span class="kr">forall</span> <span class="nv">n</span>, even n = true &lt;-&gt; Even n.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, even n = true &lt;-&gt; Even n</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="document-v-rst-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, even n = true &lt;-&gt; Even n</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk2"><span class="highlight"><span class="nb">induction</span> n.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true &lt;-&gt; Even n</span></span></div></div><label class="goal-separator" for="document-v-rst-chk3"><hr></label><div class="goal-conclusion"><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk4"><span class="highlight"><span class="kp">all</span>: <span class="nb">cbn</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true &lt;-&gt; Even n</span></span></div></div><label class="goal-separator" for="document-v-rst-chk5"><hr></label><div class="goal-conclusion"><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk6"><span class="highlight">- <span class="c">(* n ‚Üê 0 *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk7"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = true -&gt; Even <span class="mi">0</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Even <span class="mi">0</span> -&gt; true = true</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kp">all</span>: <span class="nb">constructor</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk9"><span class="highlight">- <span class="c">(* n ‚Üê S _ *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true &lt;-&gt; Even n</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chka" style="display: none" type="checkbox"><label class="alectryon-input alectryon-failed" for="document-v-rst-chka"><span class="highlight"><span class="nb">apply</span> IHn. <span class="c">(* stuck! *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="highlight">In environment
n : nat
IHn : even n = true &lt;-&gt; Even n
H : even n = true -&gt; Even n
Unable to <span class="nb">unify</span> <span class="s2">&quot;Even n&quot;</span> <span class="kr">with</span>
 <span class="s2">&quot;even (S n) = true &lt;-&gt; Even (S n)&quot;</span>.</span></blockquote></div></div></small></span></pre><p>The induction hypothesis doesn't apply ‚Äî maybe we need to destruct <tt class="docutils literal">n</tt>?</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chkb"><span class="highlight"><span class="nb">destruct</span> n.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even <span class="mi">1</span> = true &lt;-&gt; Even <span class="mi">1</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chkc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></span></div></div><label class="goal-separator" for="document-v-rst-chkc"><hr></label><div class="goal-conclusion"><span class="highlight">even (S (S n)) = true &lt;-&gt; Even (S (S n))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chkd"><span class="highlight">+ <span class="c">(* n ‚Üê 1 *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even <span class="mi">1</span> = true &lt;-&gt; Even <span class="mi">1</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chke"><span class="highlight">+ <span class="c">(* n ‚Üê S (S _) *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even (S (S n)) = true &lt;-&gt; Even (S (S n))</span></div></blockquote></div></div></small></span></pre><p>Stuck again!</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Abort</span>.</span></span></span></pre><div class="section" id="strengthening-the-spec">
<h1>Strengthening the spec</h1>
<p>The usual approach is to strengthen the spec to work around the weakness of the inductive principle.</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="document-v-rst-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chkf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">even_Even</span> :
  <span class="kr">forall</span> <span class="nv">n</span>, (even n = true &lt;-&gt; Even n) /\
       (even (S n) = true &lt;-&gt; Even (S n)).</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
(even n = true &lt;-&gt; Even n) /\
(even (S n) = true &lt;-&gt; Even (S n))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="document-v-rst-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk10"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
(even n = true &lt;-&gt; Even n) /\
(even (S n) = true &lt;-&gt; Even (S n))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk11"><span class="highlight"><span class="nb">induction</span> n; <span class="nb">cbn</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(true = true &lt;-&gt; Even <span class="mi">0</span>) /\ (false = true &lt;-&gt; Even <span class="mi">1</span>)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk12" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">(even n = true &lt;-&gt; Even n) /\ (even (S n) = true &lt;-&gt; Even (S n))</span></span></div></div><label class="goal-separator" for="document-v-rst-chk12"><hr></label><div class="goal-conclusion"><span class="highlight">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk13"><span class="highlight">- <span class="c">(* n ‚Üê 0 *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(true = true &lt;-&gt; Even <span class="mi">0</span>) /\ (false = true &lt;-&gt; Even <span class="mi">1</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk14"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">cbn</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = true -&gt; Even <span class="mi">0</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk15" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = true -&gt; Even <span class="mi">1</span></span></div></blockquote><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Even <span class="mi">1</span> -&gt; false = true</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk17"><span class="highlight"><span class="kp">all</span>: <span class="kp">try</span> <span class="nb">constructor</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = true -&gt; Even <span class="mi">1</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Even <span class="mi">1</span> -&gt; false = true</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kp">all</span>: <span class="nb">inversion</span> <span class="mi">1</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk19"><span class="highlight">- <span class="c">(* n ‚Üê S _ *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>IHn</var><span class="hyp-type"><b>:</b><span class="highlight">(even n = true &lt;-&gt; Even n) /\ (even (S n) = true &lt;-&gt; Even (S n))</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk1a"><span class="highlight"><span class="nb">destruct</span> IHn <span class="kr">as</span> ((Hne &amp; HnE) &amp; (HSne &amp; HSnE)).</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>Hne</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true -&gt; Even n</span></span></div><div><var>HnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even n -&gt; even n = true</span></span></div><div><var>HSne</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></div><div><var>HSnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk1b"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">cbn</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>Hne</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true -&gt; Even n</span></span></div><div><var>HnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even n -&gt; even n = true</span></span></div><div><var>HSne</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></div><div><var>HSnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even (S n) = true -&gt; Even (S n)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk1c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>Hne</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true -&gt; Even n</span></span></div><div><var>HnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even n -&gt; even n = true</span></span></div><div><var>HSne</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></div><div><var>HSnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></div></div><label class="goal-separator" for="document-v-rst-chk1c"><hr></label><div class="goal-conclusion"><span class="highlight">Even (S n) -&gt; even (S n) = true</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk1d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>Hne</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true -&gt; Even n</span></span></div><div><var>HnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even n -&gt; even n = true</span></span></div><div><var>HSne</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></div><div><var>HSnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></div></div><label class="goal-separator" for="document-v-rst-chk1d"><hr></label><div class="goal-conclusion"><span class="highlight">even n = true -&gt; Even (S (S n))</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk1e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>Hne</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true -&gt; Even n</span></span></div><div><var>HnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even n -&gt; even n = true</span></span></div><div><var>HSne</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></div><div><var>HSnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></div></div><label class="goal-separator" for="document-v-rst-chk1e"><hr></label><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk1f"><span class="highlight"><span class="kp">all</span>: <span class="nb">eauto using</span> EvenS.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div><div><var>Hne</var><span class="hyp-type"><b>:</b><span class="highlight">even n = true -&gt; Even n</span></span></div><div><var>HnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even n -&gt; even n = true</span></span></div><div><var>HSne</var><span class="hyp-type"><b>:</b><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></div><div><var>HSnE</var><span class="hyp-type"><b>:</b><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">eauto</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre></div>
<div class="section" id="writing-a-fixpoint">
<h1>Writing a fixpoint</h1>
<p>But writing a fixpoint (either with the <code class="highlight coq"><span class="keyword namespace">Fixpoint</span></code> command or with the <code class="highlight coq"><span class="keyword reserved">fix</span></code> tactic) is much nicer:</p>
<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="document-v-rst-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk20"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">even_Even_fp</span> (<span class="nv">n</span>: nat):
  even n = true &lt;-&gt; Even n.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even n</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="document-v-rst-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk21"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even n</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk22"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [ | [ | n ] ]; <span class="nb">cbn</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk23" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div></div><label class="goal-separator" for="document-v-rst-chk23"><hr></label><div class="goal-conclusion"><span class="highlight">false = true &lt;-&gt; Even <span class="mi">1</span></span></div></blockquote><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk24" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><label class="goal-separator" for="document-v-rst-chk24"><hr></label><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even (S (S n))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk25"><span class="highlight">- <span class="c">(* n ‚Üê 0 *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kp">repeat</span> <span class="nb">constructor</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk26"><span class="highlight">- <span class="c">(* n ‚Üê 1 *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = true &lt;-&gt; Even <span class="mi">1</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk27"><span class="highlight">- <span class="c">(* n ‚Üê S (S _) *)</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even (S (S n))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk28"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even n = true -&gt; Even (S (S n))</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="document-v-rst-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><label class="goal-separator" for="document-v-rst-chk29"><hr></label><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk2a"><span class="highlight">+</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">even n = true -&gt; Even (S (S n))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">constructor</span>; <span class="nb">apply</span> even_Even_fp; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="document-v-rst-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="document-v-rst-chk2b"><span class="highlight">+</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div><var>even_Even_fp</var><span class="hyp-type"><b>:</b><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></div><div><var>n</var><span class="hyp-type"><b>:</b><span class="highlight">nat</span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">apply</span> even_Even_fp; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><p>Note that the standard library already contains a <a class="mycoqid reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">boolean</a> <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">predicate</a> for <code class="highlight coq"><span class="name">even</span></code> (called <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">Coq.Init.Nat.even</a>, or <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">even</a> for short), as well as an <a class="mycoqid reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.Even">inductive one</a> (called <a class="reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.Even">Nat.Even</a> in module <a class="reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#">Coq.Arith.PeanoNat</a>).</p>
</div>
</div>
</div></body>
</html>
